<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>正在跳轉到物流選擇頁面...</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f5f5f5;
        }
        .loading-container {
            text-align: center;
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 2s linear infinite;
            margin: 0 auto 20px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        h2 {
            color: #333;
            margin-bottom: 10px;
        }
        p {
            color: #666;
            margin: 5px 0;
        }
        .debug {
            margin-top: 20px;
            font-size: 12px;
            color: #999;
        }
    </style>
</head>
<body>
    <div class="loading-container">
        <div class="spinner"></div>
        <h2>正在跳轉到物流選擇頁面</h2>
        <p>請稍候，系統正在為您準備物流選擇介面...</p>
        
        <form id="ecpayForm" method="POST" action="https://logistics-stage.ecpay.com.tw/Express/RedirectToLogisticsSelection" accept-charset="UTF-8">
            <input type="hidden" name="PlatformID" value="">
            <input type="hidden" name="MerchantID" value="3002607">
            <input type="hidden" name="RqHeader" value="{&quot;Timestamp&quot;:&quot;1753096721&quot;,&quot;Revision&quot;:&quot;1.0.0&quot;}">
            <input type="hidden" name="Data" value="J+4RZICRafc0qeX9gqdrlV7nv7AiixVoLlmti9IHNfdZ6exxrmWJwyx43CsBxzx/RtBuvbOZNjglsL9I6xw9u+MYDvserhIz+hb/iV+amGJPGVmhbEyzbMfwHYixrshdXVCXTuQQLViH442mNBVdhBXUNc9yni6tEIyxhRfjFEgdu3LCb3/roBcTFoVa8ovAoEl5SZ89p76I/ikKHogr/f8EBwWhw4Mx6UnOqSj1C5zA7f5b82PrOELl4VJgaEf4VKoonh/S+ub0L3ZJm1LU/pzbECCvWuYUh19wHAknUXSwqjSPfkE0BfOHO5v2LD4VIzLNuLpf8OwNbFvRZMgGlPOk95iOJyMlVjgaWAaLj80kkue2kp2x3PC45Dy+2qbYR+Ym6j76LEsT2AC/P+ZYKHg/TgAXHdw4ZxT/vLjHHKXDgJvbClU4GaScxtNJhuVZ0AgI/Dn3GMofqV4VMXrT1AcJxAVN9kKckwICSuu40rVOHtl9qaqQp8AjpkGnCS9+E40cH2muYL5al2O1D9xbMcfY5x2iQ6+J5MpCrr4+rIUcymc6aLX4LbRbma4bubCeLRdD/8YYefH27+Xd8qcr3K0xNG83P6Wqk8h8LqsgqKIQRrKEibc/wEyKZAlUn/8j">
        </form>
        
        <div class="debug">
            <p>商店代號: 3002607</p>
            <p>平台代號: 無</p>
            <p>時間戳: 1753096721</p>
            <p>RqHeader: {"Timestamp":"1753096721","Revision":"1.0.0"}</p>
            <p>Data 長度: 640</p>
            
            <!-- 顯示實際將要提交的參數 -->
            <details style="margin-top: 10px;">
                <summary>點擊查看提交參數詳情</summary>
                <pre style="font-size: 10px; text-align: left; background: #f0f0f0; padding: 10px; margin: 10px 0;">
PlatformID: ""
MerchantID: "3002607"
RqHeader: {"Timestamp":"1753096721","Revision":"1.0.0"}
Data: J+4RZICRafc0qeX9gqdrlV7nv7AiixVoLlmti9IHNfdZ6exxrmWJwyx43CsBxzx/RtBuvbOZNjglsL9I6xw9u+MYDvserhIz+hb/...
                </pre>
            </details>
        </div>
    </div>

    <script>
        console.log('🚚 ECPay 物流選擇表單參數:');
        console.log('PlatformID:', '');
        console.log('MerchantID:', '3002607');
        console.log('RqHeader:', '{"Timestamp":"1753096721","Revision":"1.0.0"}');
        console.log('RqHeader (escaped):', '{&quot;Timestamp&quot;:&quot;1753096721&quot;,&quot;Revision&quot;:&quot;1.0.0&quot;}');
        console.log('Data length:', 640);
        console.log('Target URL:', 'https://logistics-stage.ecpay.com.tw/Express/RedirectToLogisticsSelection');
        
        // 檢查表單元素值
        const form = document.getElementById('ecpayForm');
        const formData = new FormData(form);
        console.log('📋 實際表單資料:');
        for (let [key, value] of formData.entries()) {
            console.log(`  ${key}: ${key === 'Data' ? value.toString().substring(0, 50) + '...' : value}`);
        }
        
        // 攔截表單提交，先檢查資料
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            console.log('🔍 提交前最終檢查:');
            const inputs = form.querySelectorAll('input[type="hidden"]');
            inputs.forEach(input => {
                console.log(`  ${input.name}: ${input.value.substring(0, 100)}${input.value.length > 100 ? '...' : ''}`);
            });
            
            // 確認後提交
            setTimeout(() => {
                console.log('🚀 確認提交表單到 ECPay...');
                form.submit();
            }, 2000);
        });
        
        // 3秒後自動觸發提交檢查
        setTimeout(function() {
            console.log('🚀 正在提交表單到 ECPay...');
            document.getElementById('ecpayForm').submit();
        }, 3000);
    </script>
</body>
</html>