<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Navigation Debug Test</title>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px; 
            margin: 0 auto; 
            padding: 20px; 
            background: #f5f5f5;
        }
        .container { 
            background: white; 
            padding: 24px; 
            border-radius: 8px; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        h1, h2 { color: #1a1a1a; }
        h1 { border-bottom: 3px solid #007acc; padding-bottom: 10px; }
        h2 { color: #2d4a5a; margin-top: 24px; border-left: 4px solid #007acc; padding-left: 12px; }
        .nav-simulation {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            padding: 16px;
            margin: 16px 0;
        }
        .nav-section {
            border: 1px dashed #ccc;
            border-radius: 4px;
            padding: 12px;
            text-align: center;
        }
        .nav-section h3 {
            margin: 0 0 8px 0;
            font-size: 14px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .nav-left { background: #f0f8ff; }
        .nav-center { background: #fff9e6; }
        .nav-right { background: #f0fff0; }
        .nav-item {
            display: inline-block;
            margin: 2px 4px;
            padding: 4px 8px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }
        .algorithm-box {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            padding: 16px;
            margin: 16px 0;
        }
        .algorithm-title {
            font-weight: 600;
            color: #495057;
            margin-bottom: 8px;
        }
        .keyword-list {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            background: #f1f3f4;
            padding: 8px;
            border-radius: 4px;
            font-size: 13px;
            margin: 8px 0;
        }
        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 16px;
            border-radius: 6px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 13px;
            line-height: 1.5;
            overflow-x: auto;
            margin: 16px 0;
        }
        .test-item {
            background: #f8f9fa;
            border-left: 4px solid #28a745;
            padding: 12px;
            margin: 8px 0;
            border-radius: 0 4px 4px 0;
        }
        .problem-item {
            background: #fff5f5;
            border-left: 4px solid #dc3545;
            padding: 12px;
            margin: 8px 0;
            border-radius: 0 4px 4px 0;
        }
        .solution-item {
            background: #f0f8ff;
            border-left: 4px solid #007acc;
            padding: 12px;
            margin: 8px 0;
            border-radius: 0 4px 4px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🧭 Navigation Debug & Optimization Test</h1>
        <p><strong>目標：</strong>修正導航列項目分配邏輯，確保 Blog 和 About Us 正確顯示在左側欄位。</p>
        <p><strong>時間：</strong><span id="timestamp"></span></p>
    </div>

    <div class="container">
        <h2>📊 Current Navigation Allocation Algorithm</h2>
        
        <div class="algorithm-box">
            <div class="algorithm-title">左側項目匹配關鍵字：</div>
            <div class="keyword-list">
                ['首頁', 'home', '商品', 'products', 'blog', 'about', '關於', '部落格', '文章']
            </div>
        </div>

        <div class="algorithm-box">
            <div class="algorithm-title">右側項目匹配關鍵字：</div>
            <div class="keyword-list">
                ['服務', 'service', 'contact', '聯絡', '幫助', 'help', '支援', 'support']
            </div>
        </div>

        <div class="algorithm-box">
            <div class="algorithm-title">備用規則：</div>
            <div class="keyword-list">
                左側：index < 2（前兩個項目）<br>
                右側：!isLeftSideItem（不是左側項目的剩餘項目）
            </div>
        </div>
    </div>

    <div class="container">
        <h2>🔍 Potential Navigation Items Analysis</h2>
        
        <div class="test-item">
            <strong>可能的導航項目名稱：</strong>
            <ul>
                <li>首頁 / Home</li>
                <li>商品 / Products</li>
                <li>部落格 / Blog / 文章</li>
                <li>關於我們 / About Us / About</li>
                <li>服務 / Services</li>
                <li>聯絡我們 / Contact Us / Contact</li>
                <li>幫助 / Help / Support</li>
            </ul>
        </div>

        <div class="nav-simulation">
            <div class="nav-section nav-left">
                <h3>Left Section</h3>
                <div class="nav-item">首頁</div>
                <div class="nav-item">商品</div>
                <div class="nav-item">Blog</div>
                <div class="nav-item">關於我們</div>
            </div>
            <div class="nav-section nav-center">
                <h3>Center Section</h3>
                <div class="nav-item">🏪 LOGO</div>
            </div>
            <div class="nav-section nav-right">
                <h3>Right Section</h3>
                <div class="nav-item">服務</div>
                <div class="nav-item">聯絡我們</div>
                <div class="nav-item">🛒</div>
                <div class="nav-item">👤</div>
            </div>
        </div>
    </div>

    <div class="container">
        <h2>⚠️ Identified Problems</h2>
        
        <div class="problem-item">
            <strong>問題 1：</strong> Blog 和 About Us 可能使用不同的名稱（如 "部落格"、"關於我們"、"文章"）
        </div>
        
        <div class="problem-item">
            <strong>問題 2：</strong> 備用規則 index < 2 可能干擾正常的關鍵字匹配
        </div>
        
        <div class="problem-item">
            <strong>問題 3：</strong> 關鍵字匹配大小寫敏感性問題
        </div>
        
        <div class="problem-item">
            <strong>問題 4：</strong> href 與 name 的匹配邏輯可能不夠全面
        </div>
    </div>

    <div class="container">
        <h2>💡 Proposed Solutions</h2>
        
        <div class="solution-item">
            <strong>解決方案 1：</strong> 擴展左側關鍵字列表，包含更多可能的變體
            <div class="keyword-list">
                ['首頁', 'home', '商品', 'products', 'product', 'shop', 'shopping', 'blog', 'blogs', 'about', 'about-us', 'aboutus', '關於', '關於我們', '部落格', '文章', 'news', '新聞']
            </div>
        </div>
        
        <div class="solution-item">
            <strong>解決方案 2：</strong> 移除或修改備用規則，避免干擾關鍵字匹配
        </div>
        
        <div class="solution-item">
            <strong>解決方案 3：</strong> 改善匹配邏輯，同時檢查 name 和 href
        </div>
        
        <div class="solution-item">
            <strong>解決方案 4：</strong> 新增 debug 模式，顯示每個項目的分配原因
        </div>
    </div>

    <div class="container">
        <h2>🔧 Updated Navigation Logic</h2>
        
        <div class="code-block">
const getNavigationSide = (item, index) => {
  const leftKeywords = [
    'home', 'homes', '首頁', '主頁',
    'product', 'products', 'shop', 'shopping', '商品', '產品', '購物',
    'blog', 'blogs', 'article', 'articles', 'news', '部落格', '文章', '新聞', '資訊',
    'about', 'about-us', 'aboutus', '關於', '關於我們', '公司簡介'
  ]
  
  const rightKeywords = [
    'service', 'services', '服務', '服務項目',
    'contact', 'contact-us', 'contactus', '聯絡', '聯絡我們', '聯繫',
    'help', 'support', 'faq', '幫助', '支援', '客服', '常見問題'
  ]
  
  const name = item.name.toLowerCase()
  const href = item.href.toLowerCase()
  
  // 優先檢查左側關鍵字
  if (leftKeywords.some(keyword => 
    name.includes(keyword) || href.includes(keyword)
  )) {
    return 'left'
  }
  
  // 檢查右側關鍵字  
  if (rightKeywords.some(keyword => 
    name.includes(keyword) || href.includes(keyword)
  )) {
    return 'right'
  }
  
  // 備用規則：前面的項目傾向左側，後面的項目傾向右側
  return index <= Math.floor(navigation.length / 2) ? 'left' : 'right'
}
        </div>
    </div>

    <div class="container">
        <h2>📝 Test Recommendations</h2>
        
        <div class="test-item">
            <strong>步驟 1：</strong> 檢查 Sanity CMS 中實際的導航項目名稱和 href
        </div>
        
        <div class="test-item">
            <strong>步驟 2：</strong> 實施新的導航分配邏輯
        </div>
        
        <div class="test-item">
            <strong>步驟 3：</strong> 測試各種導航項目組合
        </div>
        
        <div class="test-item">
            <strong>步驟 4：</strong> 驗證響應式行為和視覺效果
        </div>
    </div>

    <script>
        // 顯示當前時間
        document.getElementById('timestamp').textContent = new Date().toLocaleString('zh-TW');
        
        // 添加一些互動效果
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('mouseenter', () => {
                item.style.transform = 'scale(1.05)';
                item.style.transition = 'transform 0.2s ease';
            });
            
            item.addEventListener('mouseleave', () => {
                item.style.transform = 'scale(1)';
            });
        });
        
        console.log('🧭 Navigation Debug Test loaded');
        console.log('Current issues: Blog and About Us appearing in wrong sections');
        console.log('Recommended fix: Expand keyword matching and improve allocation logic');
    </script>
</body>
</html>
