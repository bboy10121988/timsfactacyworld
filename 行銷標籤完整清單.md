# è¡ŒéŠ·æ¨™ç±¤å®Œæ•´æ¸…å–®

æœ¬æ–‡ä»¶å½™æ•´äº†æ•´å€‹ç³»çµ±ä¸­æ‰€æœ‰çš„ã€Œè¡ŒéŠ·æ¨™ç±¤ã€é¡å‹èˆ‡ä¾†æºã€‚

## ğŸ“‹ æ¨™ç±¤é¡å‹ç¸½è¦½

ç³»çµ±å…±å®šç¾©äº† **18 ç¨®** è¡ŒéŠ·æ¨™ç±¤é¡å‹ï¼š

### 1. æŠ˜æ‰£ç›¸é—œæ¨™ç±¤ (Discount Labels)
| æ¨™ç±¤é¡å‹ | è‹±æ–‡åç¨± | ä¸­æ–‡é¡¯ç¤º | å„ªå…ˆç´š | ä¾†æº |
|---------|---------|---------|-------|------|
| `auto-discount` | è‡ªå‹•è¨ˆç®—æŠ˜æ‰£ | `XæŠ˜` | 3 | Medusa API / åƒ¹æ ¼è¨ˆç®— |
| `manual-discount` | æ‰‹å‹•è¨­ç½®æŠ˜æ‰£ | `è‡ªå®šç¾©` | 4 | Metadata |
| `clearance` | æ¸…å€‰ç‰¹åƒ¹ | `æ¸…å€‰ç‰¹åƒ¹` | 5 | Metadata |

### 2. æ´»å‹•ä¿ƒéŠ·æ¨™ç±¤ (Campaign Labels)
| æ¨™ç±¤é¡å‹ | è‹±æ–‡åç¨± | ä¸­æ–‡é¡¯ç¤º | å„ªå…ˆç´š | ä¾†æº |
|---------|---------|---------|-------|------|
| `campaign` | ä¿ƒéŠ·æ´»å‹• | `è‡ªå®šç¾©æ´»å‹•åç¨±` | 6 | Metadata / Medusa API |
| `promotion` | è‡ªå®šç¾©ä¿ƒéŠ· | `è‡ªå®šç¾©æ–‡å­—` | 10 | Metadata |
| `special-event` | ç‰¹æ®Šæ´»å‹• | `è‡ªå®šç¾©æ´»å‹•åç¨±` | 11 | Metadata |
| `discount-code` | æŠ˜æ‰£ç¢¼æç¤º | `è¼¸å…¥æŠ˜æ‰£ç¢¼äº«å„ªæƒ ` | 12 | Metadata |

### 3. å•†å“ç‰¹æ€§æ¨™ç±¤ (Product Feature Labels)
| æ¨™ç±¤é¡å‹ | è‹±æ–‡åç¨± | ä¸­æ–‡é¡¯ç¤º | å„ªå…ˆç´š | ä¾†æº |
|---------|---------|---------|-------|------|
| `new` | æ–°å“ | `NEW` | 14 | Metadata / Tags |
| `hot` | ç†±éŠ· | `HOT` | 15 | Metadata / Tags |
| `bestseller` | æš¢éŠ· | `BEST` | 16 | Metadata / Tags |
| `featured` | ç²¾é¸ | `FEATURED` | 17 | Metadata / Tags / Collection |
| `sale` | ç‰¹åƒ¹ | `SALE` | 18 | Metadata / Tags |

### 4. é™åˆ¶æ€§æ¨™ç±¤ (Restriction Labels)
| æ¨™ç±¤é¡å‹ | è‹±æ–‡åç¨± | ä¸­æ–‡é¡¯ç¤º | å„ªå…ˆç´š | ä¾†æº |
|---------|---------|---------|-------|------|
| `limited` | é™é‡ | `LIMITED` | 9 | Metadata / Tags |
| `exclusive` | ç¨å®¶ | `ç¨å®¶` | 8 | Metadata |
| `flash-sale` | é™æ™‚æ¶è³¼ | `é™æ™‚æ¶è³¼` | 2 | Metadata |

### 5. åº«å­˜ç‹€æ…‹æ¨™ç±¤ (Stock Status Labels)
| æ¨™ç±¤é¡å‹ | è‹±æ–‡åç¨± | ä¸­æ–‡é¡¯ç¤º | å„ªå…ˆç´š | ä¾†æº |
|---------|---------|---------|-------|------|
| `sold-out` | å”®å®Œ | `å”®å®Œ` | 1 | åº«å­˜ç³»çµ± |
| `preorder` | é è¨‚ | `é è¨‚` | 13 | åº«å­˜ç³»çµ± |

### 6. è³¼è²·å„ªæƒ æ¨™ç±¤ (Purchase Benefit Labels)
| æ¨™ç±¤é¡å‹ | è‹±æ–‡åç¨± | ä¸­æ–‡é¡¯ç¤º | å„ªå…ˆç´š | ä¾†æº |
|---------|---------|---------|-------|------|
| `bundle` | çµ„åˆå„ªæƒ  | `çµ„åˆå„ªæƒ ` | 7 | Metadata / Medusa API |

## ğŸ¯ æ¨™ç±¤ä¾†æºè©³ç´°èªªæ˜

### 1. Medusa API ä¾†æº
é€é `getActivePromotionLabels()` å‡½æ•¸å¾ Medusa å¾Œç«¯å–å¾—çœŸå¯¦ä¿ƒéŠ·è³‡æ–™ï¼š
- **è‡ªå‹•æŠ˜æ‰£**: æ ¹æ“šä¿ƒéŠ·æ´»å‹•è‡ªå‹•è¨ˆç®—ç™¾åˆ†æ¯”æŠ˜æ‰£
- **æ‰‹å‹•æŠ˜æ‰£**: å›ºå®šé‡‘é¡æŠ˜æ‰£
- **æ´»å‹•æ¨™ç±¤**: ä¿ƒéŠ·æ´»å‹•åç¨±èˆ‡ä»£ç¢¼
- **çµ„åˆå„ªæƒ **: è²·Xé€Yã€æ»¿ä»¶è´ˆå“ç­‰

### 2. ç”¢å“ Metadata ä¾†æº
åœ¨ç”¢å“çš„ `metadata` æ¬„ä½ä¸­è¨­å®šï¼š
```json
{
  "discount": "20% OFF",
  "promotion": "å¤æ—¥ç‰¹æƒ ",
  "promotion_type": "hot",
  "special_event": "é€±å¹´æ…¶",
  "campaign": "æ–°å“ä¸Šå¸‚",
  "bundle": "è²·2é€1",
  "flash_sale": "true",
  "clearance": "true",
  "exclusive": "true",
  "discount_code_available": "true"
}
```

### 3. ç”¢å“æ¨™ç±¤ (Tags) ä¾†æº
åœ¨ç”¢å“çš„ `tags` ä¸­è¨­å®šï¼š
- `new` / `æ–°å“`
- `hot` / `ç†±éŠ·`
- `limited` / `é™é‡`
- `bestseller` / `æš¢éŠ·`
- `featured` / `ç²¾é¸`

### 4. åƒ¹æ ¼è¨ˆç®—ä¾†æº
é€é `calculateProductDiscount()` å‡½æ•¸ï¼š
- æ¯”è¼ƒ `original_amount` èˆ‡ `calculated_amount`
- è‡ªå‹•è¨ˆç®—æŠ˜æ‰£ç™¾åˆ†æ¯”
- è½‰æ›ç‚ºå°ç£ç¿’æ…£çš„ã€ŒXæŠ˜ã€è¡¨ç¤ºæ³•

### 5. åº«å­˜ç³»çµ±ä¾†æº
é€é `getProductStockStatus()` å‡½æ•¸ï¼š
- **å”®å®Œç‹€æ…‹**: æ‰€æœ‰è®Šé«”éƒ½ç„¡åº«å­˜
- **é è¨‚ç‹€æ…‹**: å…è¨±é è¨‚ä½†ç›®å‰ç„¡åº«å­˜

### 6. å•†å“é›†åˆ (Collection) ä¾†æº
æª¢æŸ¥ç”¢å“æ‰€å±¬çš„é›†åˆï¼š
- é›†åˆ handle ç‚º `featured` æˆ– `ç²¾é¸` â†’ é¡¯ç¤ºç²¾é¸æ¨™ç±¤

## ğŸ”„ æ¨™ç±¤ç²å–æµç¨‹

1. **å„ªå…ˆä½¿ç”¨ Medusa API**: `getActivePromotionLabels()`
2. **å¤±æ•—æ™‚å›é€€æœ¬åœ°è¨ˆç®—**: `getPromotionLabels()`
3. **æŒ‰å„ªå…ˆç´šæ’åºé¡¯ç¤º**: æ•¸å­—è¶Šå°å„ªå…ˆç´šè¶Šé«˜
4. **æœ€å¤šé¡¯ç¤º 3 å€‹æ¨™ç±¤**: é¿å…ä»‹é¢éæ–¼æ“æ“ 

## ğŸ¨ æ¨™ç±¤æ¨£å¼

æ‰€æœ‰æ¨™ç±¤éƒ½æœ‰å°æ‡‰çš„ CSS æ¨£å¼é¡åˆ¥ï¼š
- **åŸºç¤æ¨£å¼**: `.product-label`
- **ç‰¹å®šæ¨£å¼**: `.product-label.{type}`
- **å‹•ç•«æ•ˆæœ**: éƒ¨åˆ†æ¨™ç±¤å…·æœ‰è„ˆå‹•ã€é–ƒçˆæ•ˆæœ

## ğŸ“± å‰ç«¯é¡¯ç¤ºé‚è¼¯

åœ¨ `ProductPreview` çµ„ä»¶ä¸­ï¼š
- **å·¦ä¸Šè§’é¡¯ç¤º**: éå”®å®Œèˆ‡é è¨‚æ¨™ç±¤
- **å³ä¸‹è§’é¡¯ç¤º**: å”®å®Œ/é è¨‚ç‹€æ…‹æ¨™ç±¤
- **éæ¿¾é‚è¼¯**: å·²å”®å®Œå•†å“ä¸é¡¯ç¤ºå…¶ä»–ä¿ƒéŠ·æ¨™ç±¤

## ğŸ”§ é™¤éŒ¯èˆ‡æ¸¬è©¦

### é–‹ç™¼æ¨¡å¼è¼¸å‡º
```javascript
console.log(`ã€${product.title}ã€‘çœŸå¯¦ä¿ƒéŠ·æ¨™ç±¤:`, labels)
console.log(`ã€${product.title}ã€‘å›é€€ä¿ƒéŠ·æ¨™ç±¤:`, labels)
console.log(`ã€${product.title}ã€‘æœ€çµ‚ä¿ƒéŠ·æ¨™ç±¤:`, labels)
```

### æ¸¬è©¦è…³æœ¬
- `/test-real-promotion-labels.js`: æ¸¬è©¦çœŸå¯¦ä¿ƒéŠ·æ¨™ç±¤å–å¾—
- `/backend/scripts/create-test-promotions.js`: å»ºç«‹æ¸¬è©¦ä¿ƒéŠ·æ´»å‹•

## ğŸ“š ç›¸é—œæª”æ¡ˆ

- `/frontend/src/lib/promotion-utils.ts`: ä¸»è¦é‚è¼¯æª”æ¡ˆ
- `/frontend/src/modules/products/components/product-preview/index.tsx`: å‰ç«¯é¡¯ç¤ºçµ„ä»¶
- `/frontend/src/styles/globals.css`: æ¨™ç±¤æ¨£å¼å®šç¾©
- `/frontend/src/lib/data/promotions.ts`: ä¿ƒéŠ·è³‡æ–™ç²å–
- `/frontend/src/lib/fake-promotion-data.ts`: å‡è³‡æ–™èˆ‡æ¸¬è©¦è³‡æ–™

---

**ç¸½çµ**: ç³»çµ±æä¾›äº† 18 ç¨®è±å¯Œçš„è¡ŒéŠ·æ¨™ç±¤é¡å‹ï¼Œæ¶µè“‹æŠ˜æ‰£ã€æ´»å‹•ã€å•†å“ç‰¹æ€§ã€é™åˆ¶æ€§ã€åº«å­˜ç‹€æ…‹ã€è³¼è²·å„ªæƒ ç­‰å„å€‹é¢å‘ï¼Œä¸¦æ”¯æ´å¤šç¨®è³‡æ–™ä¾†æºèˆ‡è‡ªå‹•è¨ˆç®—é‚è¼¯ï¼Œèƒ½å¤ å…¨é¢æ»¿è¶³é›»å•†å¹³å°çš„è¡ŒéŠ·éœ€æ±‚ã€‚
